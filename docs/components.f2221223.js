!function(){var e={};Object.defineProperty(e,"__esModule",{value:!0});var t=void 0;function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.default=t,t=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({containerClassName:"email-node",contentClassName:"email-node__content",removeBtnClassName:"email-node__remove-email",onRemove:function(e){},invalidContainerClassName:"email-node--invalid"},a),this.value=t,this.prev=n,this.next=i,this.containerNode=document.createElement("div");var o=this.isValid?this.options.containerClassName:this.options.invalidContainerClassName;this.containerNode.classList.add(o),this.contentNode=document.createElement("div"),this.contentNode.classList.add(this.options.contentClassName),this.contentNode.textContent=this.value,this.removeBtnNode=this.__buildRemoveBtn(),this.containerNode.appendChild(this.contentNode),this.containerNode.appendChild(this.removeBtnNode)}var t,i,a;return t=e,(i=[{key:"__buildRemoveBtn",value:function(){var e=this,t=document.createElement("div");return t.classList.add(this.options.removeBtnClassName),t.addEventListener("click",(function(t){e.options.onRemove(e)})),t}},{key:"htmlNode",get:function(){return this.containerNode}},{key:"isValid",get:function(){return-1!==this.value.indexOf("@")}}])&&n(t.prototype,i),a&&n(t,a),e}(),e.default=t;var i={};Object.defineProperty(i,"__esModule",{value:!0});var a=void 0;i.default=a;var o,s=(o=e)&&o.__esModule?o:{default:o};function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerNode=t,this.options=Object.assign({placeholder:"Add more people",containerClassName:"emails-input",currentNodeClassName:"emails-input__current-node",onChange:function(e){}},n),this.__listeners=Object.freeze({keydown:this.__keyDownHandler.bind(this),blur:this.__blurHandler.bind(this),paste:this.__pasteHandler.bind(this)}),this.values={},this.lastEmailNode=null,this.currentNode=this.__buildNode(),this.containerNode.addEventListener("click",(function(){i.currentNode.focus()})),this.containerNode.classList.add(this.options.containerClassName),this.containerNode.appendChild(this.currentNode)}var t,n,i;return t=e,(n=[{key:"addEmail",value:function(e){if(0!==e.trim().length){var t=new s.default(e,this.lastEmailNode,null,{onRemove:this.__removeEmailNode.bind(this)});this.lastEmailNode&&(this.lastEmailNode.next=t),this.values[e]=t,this.containerNode.insertBefore(t.htmlNode,this.containerNode.lastChild),this.lastEmailNode=t,this.currentNode.value="",this.__onChange()}}},{key:"emails",value:function(e){for(var t=e.onlyValid,n=void 0!==t&&t,i=[],a=this.lastEmailNode;null!==a;)!a||n&&!a.isValid||i.unshift(a.value),a=a.prev;return i}},{key:"setEmails",value:function(e){for(var t=this.lastEmailNode;null!==t;)this.__removeEmailNode(t,!0),t=t.prev;e.forEach(this.addEmail.bind(this))}},{key:"__buildNode",value:function(){var e=document.createElement("input");for(var t in e.setAttribute("autocomplete","off"),e.setAttribute("placeholder",this.options.placeholder),e.classList.add(this.options.currentNodeClassName),e.classList.add(this.options.currentNodeClassName),this.__listeners){var n=this.__listeners[t];e.addEventListener(t,n)}return e}},{key:"__keyDownHandler",value:function(e){188===e.keyCode||13===e.keyCode?(e.preventDefault(),this.addEmail(this.currentNode.value)):8===e.keyCode&&0===this.currentNode.value.length&&(e.preventDefault(),this.lastEmailNode&&this.__removeEmailNode(this.lastEmailNode))}},{key:"__blurHandler",value:function(e){0!==this.currentNode.value.trim().length&&this.addEmail(this.currentNode.value)}},{key:"__pasteHandler",value:function(e){var t=this;e.preventDefault(),(e.clipboardData||window.clipboardData).getData("text").split(",").forEach((function(e){t.addEmail(e)}))}},{key:"__onChange",value:function(){this.options.onChange(this.emails({}))}},{key:"__removeEmailNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.next;n&&(n.prev=e.prev);var i=e.prev;i&&(i.next=n),e===this.lastEmailNode&&(this.lastEmailNode=i),e.htmlNode.remove(),delete this.values[e.value],t||this.__onChange()}}])&&l(t.prototype,n),i&&l(t,i),e}(),i.default=a;var r=function(e){return e&&e.__esModule?e:{default:e}}(i);window.EmailsInput=r.default}();